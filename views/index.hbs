<div class="page-header">
  <h1>
    ğŸ‘€ Ø´Ù…Ø§ Ø¨Ø§ IP 
    <span class="ip-address">{{ip}}</span> 
    ÙˆØ§Ø±Ø¯ Ø´Ø¯ÛŒØ¯ !
  </h1>
  <p class="log-count">
    ğŸ“Š ØªØ¹Ø¯Ø§Ø¯ Ú©Ù„ Ù„Ø§Ú¯â€ŒÙ‡Ø§: <strong>{{total}}</strong>
  </p>
</div>

<div class="filter-box">
  <input 
    type="text" 
    id="filterInput" 
    placeholder="ğŸ” ÙÛŒÙ„ØªØ± Ø¨Ø± Ø§Ø³Ø§Ø³ IP ÛŒØ§ ÛŒÙˆØ²Ø±Ù†ÛŒÙ…" 
    class="filter-input"
  />
</div>

<div class="table-container">
  <table id="logTable" class="log-table">
    <thead>
      <tr>
        <th class="sortable" data-key="timestamp">â± Ø²Ù…Ø§Ù†</th>
        <th class="sortable" data-key="status">ğŸ“Œ ÙˆØ¶Ø¹ÛŒØª</th>
        <th class="sortable" data-key="username">ğŸ‘¤ ÛŒÙˆØ²Ø±</th>
        <th class="sortable" data-key="ip">ğŸŒ IP</th>
        <th class="sortable" data-key="port">ğŸ”Œ Ù¾ÙˆØ±Øª</th>
        <th class="sortable" data-key="method">ğŸ” Ø±ÙˆØ´</th>
      </tr>
    </thead>
    <tbody>
      {{#each logs}}
        <tr>
          <td data-label="Ø²Ù…Ø§Ù†">{{timestamp}}</td>
          <td data-label="ÙˆØ¶Ø¹ÛŒØª">{{status}}</td>
          <td data-label="ÛŒÙˆØ²Ø±">{{username}}</td>
          <td data-label="IP">{{ip}}</td>
          <td data-label="Ù¾ÙˆØ±Øª">{{port}}</td>
          <td data-label="Ø±ÙˆØ´">{{method}}</td>
        </tr>
      {{/each}}
    </tbody>
  </table>
</div>


<script>
  document.addEventListener('DOMContentLoaded', () => {
  const table = document.getElementById('logTable');
  const filterInput = document.getElementById('filterInput');
  let rows = Array.from(table.querySelectorAll('tbody tr'));
  let currentSort = { key: null, asc: true };

  function render(filteredRows) {
    const tbody = table.querySelector('tbody');
    tbody.innerHTML = '';
    filteredRows.forEach(row => tbody.appendChild(row));
  }

  function sortBy(key) {
    const idx = {
      timestamp: 0,
      status: 1,
      username: 2,
      ip: 3,
      port: 4,
      method: 5
    }[key];

    const asc = currentSort.key === key ? !currentSort.asc : true;
    currentSort = { key, asc };

    rows.sort((a, b) => {
      const aText = a.children[idx].textContent;
      const bText = b.children[idx].textContent;
      return asc ? aText.localeCompare(bText) : bText.localeCompare(aText);
    });

    render(rows);
  }

  function filterRows() {
    const q = filterInput.value.toLowerCase();
    const filtered = rows.filter(row =>
      row.textContent.toLowerCase().includes(q)
    );
    render(filtered);
  }

  document.querySelectorAll('th.sortable').forEach(th => {
    th.addEventListener('click', () => sortBy(th.dataset.key));
  });

  filterInput.addEventListener('input', filterRows);
});


</script>